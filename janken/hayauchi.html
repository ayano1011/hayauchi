<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>居合切りゲーム
    </title>
    <link rel="stylesheet" href="hayauchi.css">
</head>

<body>
    <header>

    </header>
    <main>
        <div id="main">
            <div id="menu" style="z-index: 100">
                <img src="img/title-img.001.png">
                <button id="select-btn">START</button>
                <p id="select-btn-text">くりっく「すたーと」ぼたん</p>
                <audio id="select_audio">
                    <source src="audio/和太鼓でドン.mp3" type="audio/mp3">
                </audio>
            </div>
            <div id="start-btn-wrapper">
                <p id="how-to-play">「❗️」マークがあらわれたら、<br>
                    すかさず敵をクリックしよう<br>▷</p>
                <p id="com-exp">敵(忍者いぬ)<br>↓</p>
                <audio id="exp_audio">
                    <source src="audio/和太鼓でドドン.mp3" type="audio/mp3">
                </audio>


                <button id="start-btn">わかった
                </button>
            </div>

            <div id="player-icon">
                <img src="img/samurai_woman.png" alt="player" width="120px">
            </div>
            <div id="time-to-click">
                <img src="img/fukidashi.png" alt="time" width="200px">
            </div>
            <div id="com-icon">
                <img src="img/ninjadog.png" alt="com" width="100px">

            </div>
            <div id="result"></div>

        </div>
    </main>

    <!--以下スクリプト-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script>
        //タイトル画面
        $("#select-btn").click(function () {
            $("#menu").hide(2000), document.getElementById('select_audio').currentTime = 0;
            //連続クリックに対応
            document.getElementById('select_audio').play();
            //クリックしたら音を再生
        })

        // ゲーム画面
        // 3~8の乱数を算出
        $("#start-btn").on("click", function () {
            const randomNumber1 = Math.floor(Math.random() * 5) + 3
            // ルール説明部分の「わかった」ボタンを押すとカウント開始
            // クリックしたら「わかった」ボタンは消える
            console.log(randomNumber1), $("#start-btn-wrapper").hide(1000), document.getElementById('exp_audio').currentTime = 0;
            //連続クリックに対応
            document.getElementById('exp_audio').play();
            //クリックしたら音を再生

            // ：3の場合、2秒後に撃つ指示
            if (randomNumber1 === 3) {
                setTimeout(Msg, 2000);
                function Msg() {
                    $("#time-to-click").css("display", "block")
                }
                $(function () {
                    $("#com-icon").click(function () {
                        $(this).data("click", true);
                    });
                });

                // 撃つ指示が出てから１秒以内に撃てたら勝ち
                setTimeout(function () {
                    if (!$("#com-icon").data("click")) {
                        $("#result").text("負け");
                    }
                    else {
                        $("#result").text("勝ち");
                    }
                }, 3000);

                // クリック後、！！は消える
                $("#com-icon").on("click", function () {
                    $("#time-to-click").remove();
                });

            }
            // ：４の場合,3秒後に撃つ指示
            if (randomNumber1 === 4) {
                setTimeout(Msg, 3000);
                function Msg() {
                    $("#time-to-click").css("display", "block")

                }
                $(function () {
                    $("#com-icon").click(function () {
                        $(this).data("click", true);
                    });
                });

                // 撃つ指示が出てから１秒以内に撃てたら勝ち
                setTimeout(function () {
                    if (!$("#com-icon").data("click")) {
                        $("#result").text("負け");
                    }
                    else {
                        $("#result").text("勝ち");
                    }
                }, 4000);

                // クリック後、！！は消える
                $("#com-icon").on("click", function () {
                    $("#time-to-click").remove();
                });

            }

            // ：5の場合、4秒後に撃つ指示
            if (randomNumber1 === 5) {
                setTimeout(Msg, 4000);
                function Msg() {
                    $("#time-to-click").css("display", "block")
                }
                $(function () {
                    $("#com-icon").click(function () {
                        $(this).data("click", true);
                    });
                });

                // 撃つ指示が出てから１秒以内に撃てたら勝ち
                setTimeout(function () {
                    if (!$("#com-icon").data("click")) {
                        $("#result").text("負け");
                    }
                    else {
                        $("#result").text("勝ち");
                    }
                }, 5000);

                // クリック後、！！は消える
                $("#com-icon").on("click", function () {
                    $("#time-to-click").remove();
                });

            }
            // ：6の場合、5秒後に撃つ指示
            if (randomNumber1 === 6) {
                setTimeout(Msg, 5000);
                function Msg() {
                    $("#time-to-click").css("display", "block")
                }
                $(function () {
                    $("#com-icon").click(function () {
                        $(this).data("click", true);
                    });
                });

                // 撃つ指示が出てから１秒以内に撃てたら勝ち
                setTimeout(function () {
                    if (!$("#com-icon").data("click")) {
                        $("#result").text("負け");
                    }
                    else {
                        $("#result").text("勝ち");
                    }
                }, 6000);

                // クリック後、！は消える
                $("#com-icon").on("click", function () {
                    $("#time-to-click").remove();
                });

            }
            // ：7の場合、6秒後に撃つ指示
            if (randomNumber1 === 7) {
                setTimeout(Msg, 6000);
                function Msg() {
                    $("#time-to-click").css("display", "block")

                }
                $(function () {
                    $("#com-icon").click(function () {
                        $(this).data("click", true);
                    });
                });

                // 撃つ指示が出てから１秒以内に撃てたら勝ち
                setTimeout(function () {
                    if (!$("#com-icon").data("click")) {
                        $("#result").text("負け");
                    }
                    else {
                        $("#result").text("勝ち");
                    }
                }, 7000);

                // クリック後、！！は消える
                $("#com-icon").on("click", function () {
                    $("#time-to-click").remove();
                });

            }
            // ：8の場合、7秒後に撃つ指示
            if (randomNumber1 === 8) {
                setTimeout(Msg, 7000);
                function Msg() {
                    $("#time-to-click").css("display", "block")

                }
                $(function () {
                    $("#com-icon").click(function () {
                        $(this).data("click", true);
                    });
                });

                // 撃つ指示が出てから１秒以内に撃てたら勝ち
                setTimeout(function () {
                    if (!$("#com-icon").data("click")) {
                        $("#result").text("負け");
                    }
                    else {
                        $("#result").text("勝ち");
                    }
                }, 8000);

                // クリック後、！！は消える
                $("#com-icon").on("click", function () {
                    $("#time-to-click").remove();
                });

            }





        }
        )

    </script>
</body>

</html>